{"ast":null,"code":"import _slicedToArray from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import TextareaAutosize from'@mui/material/TextareaAutosize';import{nanoid}from'nanoid';import{recipesConnect}from\"../../connect/recipes/recipes\";import{Link}from'react-router-dom';import Button from\"@mui/material/Button\";import ArrowBackRoundedIcon from'@mui/icons-material/ArrowBackRounded';import{useEffect,useState}from'react';import{useSelector}from'react-redux';import'./style.css';import{useRef}from'react';import Paper from'@mui/material/Paper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Widget=recipesConnect(function(_ref){var userId=_ref.userId,setImages=_ref.setImages,recipeData=_ref.recipeData,images=_ref.images,description=_ref.description,setDescription=_ref.setDescription,addNewRecipe=_ref.addNewRecipe;var inputRef=useRef(null);function encodeImageFileAsURL(element){var file=element.files[0];console.log(file);var reader=new FileReader();reader.onloadend=function(){setImages(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},file.name,reader.result));});};reader.readAsDataURL(file);}var handleUploadedFileImage=function handleUploadedFileImage(e){try{encodeImageFileAsURL(e.target);}catch(_unused){}};var inputClick=function inputClick(){inputRef.current.click();};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',marginBottom:'16px'},children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/create/checkProducts\",children:/*#__PURE__*/_jsx(Button,{style:{borderColor:\"#000000\",color:'#000000'},variant:\"outlined\",type:\"submit\",children:/*#__PURE__*/_jsx(ArrowBackRoundedIcon,{})})}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",children:/*#__PURE__*/_jsx(Button,{style:{marginLeft:'16px'},variant:\"outlined\",type:\"submit\",onClick:function onClick(){document.body.style.overflow=\"scroll\";addNewRecipe({\"title\":recipeData.title,\"userId\":userId,\"id\":nanoid(),\"time\":recipeData.time,\"cook\":recipeData.actions,\"lstOfProducts\":recipeData.products,\"products\":recipeData.productsWithCount,\"description\":description,\"images\":images,\"rating\":0,\"comments\":[]});},children:\"\\u041E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u043E\\u0432\\u0430\\u0442\\u044C\"})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'100%',height:'100%'},children:[/*#__PURE__*/_jsx(Button,{onClick:inputClick,style:{margin:'0 4% 3%',borderColor:\"#000000\",color:'#000000'},variant:\"outlined\",type:\"submit\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{ref:inputRef,id:\"file-upload__post\",type:\"file\",onChange:function onChange(e){handleUploadedFileImage(e);}}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'12px',gridTemplateColumns:'1fr 1fr'},children:Object.keys(images).map(function(name){return/*#__PURE__*/_jsx(Paper,{elevation:3,className:\"paper-recipe-box\",style:{aspectRatio:'1 / 1',borderRadius:'7px',overflow:'hidden',position:'relative',justifyContent:'space-between',display:'flex',alignItems:'center',flexDirection:'column'},children:/*#__PURE__*/_jsx(\"img\",{style:{width:'100%',height:'100%',objectFit:'cover'},src:\"https://cookery-app.herokuapp.com/\".concat(images[name]),alt:\"food\"})},name);})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column'},children:/*#__PURE__*/_jsx(TextareaAutosize,{style:{border:'none',margin:'10px 16px',maxHeight:'40vh'},\"aria-label\":\"textarea\",placeholder:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u044C\\u0442\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\",autoFocus:true,onChange:function onChange(e){setDescription(e.target.value);}})})]});});export var ToPost=function ToPost(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var recipeData=useSelector(function(state){return state.newRecipe;});var userId=useSelector(function(state){return state.user.id;});return/*#__PURE__*/_jsx(Widget,{userId:userId,recipeData:recipeData,images:images,setImages:setImages,description:description,setDescription:setDescription});};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/local-github/Cookery/src/components/CreateRecipeBlock/WidgetToPost.js"],"names":["TextareaAutosize","nanoid","recipesConnect","Link","Button","ArrowBackRoundedIcon","useEffect","useState","useSelector","useRef","Paper","Widget","userId","setImages","recipeData","images","description","setDescription","addNewRecipe","inputRef","encodeImageFileAsURL","element","file","files","console","log","reader","FileReader","onloadend","prevState","name","result","readAsDataURL","handleUploadedFileImage","e","target","inputClick","current","click","padding","display","flexDirection","marginBottom","borderColor","color","marginLeft","document","body","style","overflow","title","time","actions","products","productsWithCount","width","height","margin","gap","gridTemplateColumns","Object","keys","map","aspectRatio","borderRadius","position","justifyContent","alignItems","objectFit","border","maxHeight","value","ToPost","state","newRecipe","user","id"],"mappings":"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","sourcesContent":["import TextareaAutosize from '@mui/material/TextareaAutosize';\nimport { nanoid } from 'nanoid';\nimport { recipesConnect } from \"../../connect/recipes/recipes\";\nimport { Link } from 'react-router-dom';\nimport Button from \"@mui/material/Button\";\nimport ArrowBackRoundedIcon from '@mui/icons-material/ArrowBackRounded';\nimport { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport './style.css';\nimport { useRef } from 'react';\nimport Paper from '@mui/material/Paper';\n\n\nexport const Widget = recipesConnect(({userId, setImages, recipeData, images, description, setDescription, addNewRecipe}) => {\n    const inputRef = useRef(null)\n    function encodeImageFileAsURL(element) {\n        let file = element.files[0];\n        console.log(file)\n        let reader = new FileReader();\n        reader.onloadend = function() {\n            setImages(prevState => ({...prevState, [file.name]: reader.result}))\n        }\n        reader.readAsDataURL(file);\n    }\n    \n    const handleUploadedFileImage = (e) => {\n        try {\n            encodeImageFileAsURL(e.target)\n        } catch {\n        }\n    }\n\n    const inputClick = () => {\n        inputRef.current.click()\n    }\n\n    return (\n        <div style={{padding: '16px', display: 'flex', flexDirection: 'column'}}>\n            <div style={{display: 'flex', marginBottom: '16px'}}>\n                <Link to='/profile/create/checkProducts'>\n                    <Button\n                        style={{\n                            borderColor: \"#000000\",\n                            color: '#000000',\n                        }}\n                        variant=\"outlined\" \n                        type=\"submit\"\n                    >\n                        <ArrowBackRoundedIcon/>\n                    </Button>\n                </Link>\n                <Link to='/profile'>\n                    <Button\n                        style={{\n                            marginLeft: '16px',\n                        }}\n                        variant=\"outlined\"\n                        type=\"submit\"\n                        onClick = {() => { \n                            document.body.style.overflow = \"scroll\";\n                            addNewRecipe({\n                                \"title\": recipeData.title, \"userId\": userId, \"id\": nanoid(),\n                                \"time\": recipeData.time, \"cook\": recipeData.actions,\n                                \"lstOfProducts\": recipeData.products, \"products\": recipeData.productsWithCount,\n                                \"description\": description, \"images\": images,\n                                \"rating\": 0, \"comments\": []})\n                        }}\n                        >Опубликовать\n                    </Button>\n                </Link>\n            </div>\n            <div style={{width: '100%', height: '100%'}}>\n                <Button onClick={inputClick}\n                    style={{\n                        margin: '0 4% 3%',\n                        borderColor: \"#000000\",\n                        color: '#000000',\n                    }}\n                    variant=\"outlined\" \n                    type=\"submit\"\n                >Загрузить изображение\n                </Button>\n                <input ref={inputRef} id=\"file-upload__post\" type=\"file\" onChange={e => {handleUploadedFileImage(e)}}/>\n                <div style={{display: 'grid', gap: '12px', gridTemplateColumns: '1fr 1fr'}}>\n                    {\n                        Object.keys(images).map(name => (\n                            <Paper elevation={3} className=\"paper-recipe-box\" key={name} style={{aspectRatio: '1 / 1',\n                                borderRadius: '7px', overflow: 'hidden', position: 'relative',\n                                justifyContent: 'space-between', display: 'flex', alignItems: 'center', flexDirection: 'column'\n                            }}>\n                                <img style={{width: '100%', height: '100%', objectFit: 'cover'}} src={`https://cookery-app.herokuapp.com/${images[name]}`} alt='food'/>\n                            </Paper>\n                        ))\n                    }\n                </div>\n            </div>\n            <div style={{display: 'flex', flexDirection: 'column'}}>\n            <TextareaAutosize\n                style={{border: 'none', margin: '10px 16px', maxHeight: '40vh'}}\n                aria-label=\"textarea\"\n                placeholder=\"Добавьте описание\"\n                autoFocus\n                onChange={(e) => {\n                    setDescription(e.target.value);\n                }}\n            />\n            </div>\n        </div>\n    )\n})\n\nexport const ToPost = () => {\n    const [images, setImages] = useState({})\n    const [description, setDescription] = useState('')\n    const recipeData = useSelector(state => state.newRecipe)\n    const userId = useSelector(state => state.user.id)\n\n    return (\n        <Widget userId={userId} recipeData={recipeData} images={images} setImages={setImages} description={description} setDescription={setDescription}/>\n    )\n}"]},"metadata":{},"sourceType":"module"}