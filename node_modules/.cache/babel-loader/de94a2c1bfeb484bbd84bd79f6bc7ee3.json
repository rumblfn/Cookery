{"ast":null,"code":"import _regeneratorRuntime from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{Link}from'react-router-dom';import'./loginAndSignUpStyles.css';import Box from\"@mui/material/Box\";import TextField from\"@mui/material/TextField\";import Button from\"@mui/material/Button\";import Axios from'axios';import Alert from'@mui/material/Alert';import{useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{setUserDataReducer}from\"../../store/user/actions\";import{clearReducer}from\"../../store/recipes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Login=function Login(){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var dispatch=useDispatch();var userDataHandler=function userDataHandler(data){if(!data){setError('Неверный email или пароль');}else{dispatch(setUserDataReducer(data));dispatch(clearReducer());navigate(\"/profile\");}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setError(\"\");if(email){_context.next=6;break;}setError('Укажите почту');_context.next=18;break;case 6:if(password){_context.next=10;break;}setError('Введите пароль');_context.next=18;break;case 10:_context.prev=10;_context.next=13;return Axios.get('/users/get',{params:{userEmail:email,userPassword:password}}).then(function(response){setEmail('');setPassword('');userDataHandler(response.data[0]);});case 13:_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](10);setError(_context.t0);case 18:case\"end\":return _context.stop();}}},_callee,null,[[10,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"mainPage\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',width:'100%'},children:[/*#__PURE__*/_jsx(TextField,{id:\"demo-helper-text-misaligned-no-helper\",label:\"\\u041F\\u043E\\u0447\\u0442\\u0430\",color:\"background\",name:\"email\",type:\"email\",onChange:function onChange(e){setEmail(e.target.value);},value:email,sx:{m:1,mt:3}}),/*#__PURE__*/_jsx(TextField,{sx:{m:1,mb:3},id:\"demo-helper-text-misaligned-no-helper\",color:\"background\",label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",onChange:function onChange(e){setPassword(e.target.value);},value:password,type:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(Alert,{sx:{mb:2},severity:\"error\",children:error}),/*#__PURE__*/_jsx(Button,{style:{borderColor:\"#000000\",color:'#000000'},variant:\"outlined\",type:\"submit\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0423 \\u0432\\u0430\\u0441 \\u043D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})]})]})});};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/local-github/Cookery/src/components/Login/index.js"],"names":["useState","Link","Box","TextField","Button","Axios","Alert","useNavigate","useDispatch","setUserDataReducer","clearReducer","Login","navigate","email","setEmail","password","setPassword","error","setError","dispatch","userDataHandler","data","handleSubmit","e","preventDefault","get","params","userEmail","userPassword","then","response","display","flexDirection","width","target","value","m","mt","mb","borderColor","color"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport {Link} from 'react-router-dom';\nimport './loginAndSignUpStyles.css'\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport Button from \"@mui/material/Button\";\nimport Axios from 'axios';\nimport Alert from '@mui/material/Alert';\nimport { useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUserDataReducer } from \"../../store/user/actions\";\nimport { clearReducer } from \"../../store/recipes\";\n\n\nexport const Login = () => {\n    const navigate = useNavigate();\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [error, setError] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const userDataHandler = (data) => {\n        if (!data) {\n            setError('Неверный email или пароль')\n        } else {\n            dispatch(setUserDataReducer(data))\n            dispatch(clearReducer())\n            navigate(\"/profile\");\n        }\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setError(\"\");\n        if (!email) {\n            setError('Укажите почту')\n        } else if (!password) {\n            setError('Введите пароль')\n        } else {\n            try {\n                await Axios.get('/users/get', {\n                    params: {\n                        userEmail: email,\n                        userPassword: password,\n                    }\n                }).then((response) => {\n                    setEmail('')\n                    setPassword('')\n                    userDataHandler(response.data[0])\n                })\n            } catch (error) {\n                setError(error);\n            }\n        }\n    };\n\n    return (\n        <div className='mainPage'>\n            <form onSubmit={handleSubmit}>\n                <h4>Авторизация</h4>\n                <Box\n                    sx={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        width: '100%'\n                    }}\n                >\n                    <TextField\n                        id=\"demo-helper-text-misaligned-no-helper\"\n                        label=\"Почта\"\n                        color=\"background\"\n                        name=\"email\"\n                        type=\"email\"\n                        onChange={e => {setEmail(e.target.value);}}\n                        value={email}\n                        sx={{m: 1, mt: 3}}\n                    />\n                    <TextField\n                        sx={{m: 1, mb: 3}}\n                        id=\"demo-helper-text-misaligned-no-helper\"\n                        color=\"background\"\n                        label=\"Пароль\"\n                        name=\"password\"\n                        onChange={e => {setPassword(e.target.value);}}\n                        value={password}\n                        type=\"password\"\n                    />\n                </Box>\n                <div>\n                    {error && <Alert sx={{mb: 2}} severity=\"error\">{error}</Alert>}\n                    <Button \n                        style={{\n                            borderColor: \"#000000\",\n                            color: '#000000',\n                        }}\n                        variant=\"outlined\" \n                        type=\"submit\"\n                    >Войти\n                    </Button>\n                </div>\n                <br/>\n                <p>\n                    У вас нет аккаунта? <Link to=\"/signup\">Регистрация</Link>\n                </p>\n            </form>\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}