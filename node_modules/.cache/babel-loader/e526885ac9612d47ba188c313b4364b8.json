{"ast":null,"code":"import _defineProperty from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ADD_NEW_RECIPE,SET_RECIPES,SET_RECIPES_ALL,CLEAR_REDUCER,STAR_RECIPE,SET_STARRED_RECIPES}from'./actions';import Axios from'axios';var initialState={userRecipes:{},recipes:{},starred_recipes:{}};export var recipesReducer=function recipesReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case STAR_RECIPE:{switch(action.payload.starred){case true:{var userRecipeCopy=_objectSpread({},state.userRecipes);var recipesCopy=_objectSpread({},state.recipes);var recipeId=action.payload.recipeId;if(recipeId in userRecipeCopy){userRecipeCopy[recipeId].rating-=1;}if(recipeId in recipesCopy){recipesCopy[recipeId].rating-=1;}return _objectSpread(_objectSpread({},state),{},{userRecipes:userRecipeCopy,recipes:recipesCopy});}case false:{var _userRecipeCopy=_objectSpread({},state.userRecipes);var _recipesCopy=_objectSpread({},state.recipes);var _recipeId=action.payload.recipeId;if(_recipeId in _userRecipeCopy){_userRecipeCopy[_recipeId].rating+=1;}if(_recipeId in _recipesCopy){_recipesCopy[_recipeId].rating+=1;}return _objectSpread(_objectSpread({},state),{},{userRecipes:_userRecipeCopy,recipes:_recipesCopy});}default:{return state;}}}case SET_RECIPES_ALL:{var settedRecipes={};action.payload.forEach(function(item){settedRecipes[item.id]={comments:JSON.parse(item.comments),cook:JSON.parse(item.cook),description:JSON.parse(item.description),id:item.id,images:JSON.parse(item.images)||[],lstOfProducts:JSON.parse(item.lstOfProducts),products:JSON.parse(item.products),rating:item.rating,time:item.time,title:item.title,userId:item.userId};});return _objectSpread(_objectSpread({},state),{},{recipes:_objectSpread(_objectSpread({},state.recipes),settedRecipes)});}case SET_STARRED_RECIPES:{var settedUserStarredRecipes={};action.payload.forEach(function(item){settedUserStarredRecipes[item.id]={comments:JSON.parse(item.comments),cook:JSON.parse(item.cook),description:JSON.parse(item.description),id:item.id,images:JSON.parse(item.images)||[],lstOfProducts:JSON.parse(item.lstOfProducts),products:JSON.parse(item.products),rating:item.rating,time:item.time,title:item.title,userId:item.userId};});return _objectSpread(_objectSpread({},state),{},{starred_recipes:_objectSpread({},settedUserStarredRecipes)});}case SET_RECIPES:{var settedUserRecipes={};action.payload.forEach(function(item){settedUserRecipes[item.id]={comments:JSON.parse(item.comments),cook:JSON.parse(item.cook),description:JSON.parse(item.description),id:item.id,images:JSON.parse(item.images)||[],lstOfProducts:JSON.parse(item.lstOfProducts),products:JSON.parse(item.products),rating:item.rating,time:item.time,title:item.title,userId:item.userId};});return _objectSpread(_objectSpread({},state),{},{userRecipes:_objectSpread(_objectSpread({},state.userRecipes),settedUserRecipes)});}case ADD_NEW_RECIPE:{Axios.post('https://cookery-app.herokuapp.com/reciepes/insert',_objectSpread(_objectSpread({},action.payload),{},{images:JSON.stringify(action.payload.images)})).then(function(){});return _objectSpread(_objectSpread({},state),{},{userRecipes:_objectSpread(_objectSpread({},state.userRecipes),{},_defineProperty({},action.payload.id,action.payload))});}case CLEAR_REDUCER:{return _objectSpread(_objectSpread({},state),{},{userRecipes:{}});}default:{return state;}}};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/local-github/Cookery/src/store/recipes/reducer.js"],"names":["ADD_NEW_RECIPE","SET_RECIPES","SET_RECIPES_ALL","CLEAR_REDUCER","STAR_RECIPE","SET_STARRED_RECIPES","Axios","initialState","userRecipes","recipes","starred_recipes","recipesReducer","state","action","type","payload","starred","userRecipeCopy","recipesCopy","recipeId","rating","settedRecipes","forEach","item","id","comments","JSON","parse","cook","description","images","lstOfProducts","products","time","title","userId","settedUserStarredRecipes","settedUserRecipes","post","stringify","then"],"mappings":"2SAAA,OAASA,cAAT,CAAyBC,WAAzB,CAAsCC,eAAtC,CAAuDC,aAAvD,CAAsEC,WAAtE,CAAmFC,mBAAnF,KAA8G,WAA9G,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,WAAW,CAAE,EADI,CAEjBC,OAAO,CAAE,EAFQ,CAGjBC,eAAe,CAAE,EAHA,CAArB,CAMA,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAkC,IAAjCC,CAAAA,KAAiC,2DAAzBL,YAAyB,IAAXM,CAAAA,MAAW,2CAC5D,OAAQA,MAAM,CAACC,IAAf,EACI,IAAKV,CAAAA,WAAL,CAAkB,CACd,OAAQS,MAAM,CAACE,OAAP,CAAeC,OAAvB,EACI,IAAK,KAAL,CAAW,CACP,GAAIC,CAAAA,cAAc,kBAAOL,KAAK,CAACJ,WAAb,CAAlB,CACA,GAAIU,CAAAA,WAAW,kBAAON,KAAK,CAACH,OAAb,CAAf,CACA,GAAMU,CAAAA,QAAQ,CAAGN,MAAM,CAACE,OAAP,CAAeI,QAAhC,CACA,GAAIA,QAAQ,GAAIF,CAAAA,cAAhB,CAAgC,CAC5BA,cAAc,CAACE,QAAD,CAAd,CAAyBC,MAAzB,EAAmC,CAAnC,CACH,CACD,GAAID,QAAQ,GAAID,CAAAA,WAAhB,CAA6B,CACzBA,WAAW,CAACC,QAAD,CAAX,CAAsBC,MAAtB,EAAgC,CAAhC,CACH,CACD,sCAAWR,KAAX,MAAkBJ,WAAW,CAAES,cAA/B,CAA+CR,OAAO,CAAES,WAAxD,GACH,CACD,IAAK,MAAL,CAAY,CACR,GAAID,CAAAA,eAAc,kBAAOL,KAAK,CAACJ,WAAb,CAAlB,CACA,GAAIU,CAAAA,YAAW,kBAAON,KAAK,CAACH,OAAb,CAAf,CACA,GAAMU,CAAAA,SAAQ,CAAGN,MAAM,CAACE,OAAP,CAAeI,QAAhC,CACA,GAAIA,SAAQ,GAAIF,CAAAA,eAAhB,CAAgC,CAC5BA,eAAc,CAACE,SAAD,CAAd,CAAyBC,MAAzB,EAAmC,CAAnC,CACH,CACD,GAAID,SAAQ,GAAID,CAAAA,YAAhB,CAA6B,CACzBA,YAAW,CAACC,SAAD,CAAX,CAAsBC,MAAtB,EAAgC,CAAhC,CACH,CACD,sCAAWR,KAAX,MAAkBJ,WAAW,CAAES,eAA/B,CAA+CR,OAAO,CAAES,YAAxD,GACH,CACD,QAAS,CACL,MAAON,CAAAA,KAAP,CACH,CA3BL,CA6BH,CACD,IAAKV,CAAAA,eAAL,CAAsB,CAClB,GAAMmB,CAAAA,aAAa,CAAG,EAAtB,CACAR,MAAM,CAACE,OAAP,CAAeO,OAAf,CAAuB,SAACC,IAAD,CAAU,CAC7BF,aAAa,CAACE,IAAI,CAACC,EAAN,CAAb,CAAyB,CACrBC,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACE,QAAhB,CADW,CAErBG,IAAI,CAAEF,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACK,IAAhB,CAFe,CAGrBC,WAAW,CAAEH,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACM,WAAhB,CAHQ,CAIrBL,EAAE,CAAED,IAAI,CAACC,EAJY,CAKrBM,MAAM,CAAEJ,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACO,MAAhB,GAA2B,EALd,CAMrBC,aAAa,CAAEL,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACQ,aAAhB,CANM,CAOrBC,QAAQ,CAAEN,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACS,QAAhB,CAPW,CAQrBZ,MAAM,CAAEG,IAAI,CAACH,MARQ,CASrBa,IAAI,CAAEV,IAAI,CAACU,IATU,CAUrBC,KAAK,CAAEX,IAAI,CAACW,KAVS,CAWrBC,MAAM,CAAEZ,IAAI,CAACY,MAXQ,CAAzB,CAaH,CAdD,EAeA,sCAAWvB,KAAX,MAAkBH,OAAO,gCAAMG,KAAK,CAACH,OAAZ,EAAwBY,aAAxB,CAAzB,GACH,CACD,IAAKhB,CAAAA,mBAAL,CAA0B,CACtB,GAAM+B,CAAAA,wBAAwB,CAAG,EAAjC,CACAvB,MAAM,CAACE,OAAP,CAAeO,OAAf,CAAuB,SAACC,IAAD,CAAU,CAC7Ba,wBAAwB,CAACb,IAAI,CAACC,EAAN,CAAxB,CAAoC,CAChCC,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACE,QAAhB,CADsB,CAEhCG,IAAI,CAAEF,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACK,IAAhB,CAF0B,CAGhCC,WAAW,CAAEH,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACM,WAAhB,CAHmB,CAIhCL,EAAE,CAAED,IAAI,CAACC,EAJuB,CAKhCM,MAAM,CAAEJ,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACO,MAAhB,GAA2B,EALH,CAMhCC,aAAa,CAAEL,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACQ,aAAhB,CANiB,CAOhCC,QAAQ,CAAEN,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACS,QAAhB,CAPsB,CAQhCZ,MAAM,CAAEG,IAAI,CAACH,MARmB,CAShCa,IAAI,CAAEV,IAAI,CAACU,IATqB,CAUhCC,KAAK,CAAEX,IAAI,CAACW,KAVoB,CAWhCC,MAAM,CAAEZ,IAAI,CAACY,MAXmB,CAApC,CAaH,CAdD,EAeA,sCAAWvB,KAAX,MAAkBF,eAAe,kBAAM0B,wBAAN,CAAjC,GACH,CACD,IAAKnC,CAAAA,WAAL,CAAkB,CACd,GAAMoC,CAAAA,iBAAiB,CAAG,EAA1B,CACAxB,MAAM,CAACE,OAAP,CAAeO,OAAf,CAAuB,SAACC,IAAD,CAAU,CAC7Bc,iBAAiB,CAACd,IAAI,CAACC,EAAN,CAAjB,CAA6B,CACzBC,QAAQ,CAAEC,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACE,QAAhB,CADe,CAEzBG,IAAI,CAAEF,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACK,IAAhB,CAFmB,CAGzBC,WAAW,CAAEH,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACM,WAAhB,CAHY,CAIzBL,EAAE,CAAED,IAAI,CAACC,EAJgB,CAKzBM,MAAM,CAAEJ,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACO,MAAhB,GAA2B,EALV,CAMzBC,aAAa,CAAEL,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACQ,aAAhB,CANU,CAOzBC,QAAQ,CAAEN,IAAI,CAACC,KAAL,CAAWJ,IAAI,CAACS,QAAhB,CAPe,CAQzBZ,MAAM,CAAEG,IAAI,CAACH,MARY,CASzBa,IAAI,CAAEV,IAAI,CAACU,IATc,CAUzBC,KAAK,CAAEX,IAAI,CAACW,KAVa,CAWzBC,MAAM,CAAEZ,IAAI,CAACY,MAXY,CAA7B,CAaH,CAdD,EAeA,sCAAWvB,KAAX,MAAkBJ,WAAW,gCAAMI,KAAK,CAACJ,WAAZ,EAA4B6B,iBAA5B,CAA7B,GACH,CACD,IAAKrC,CAAAA,cAAL,CAAqB,CACjBM,KAAK,CAACgC,IAAN,CAAW,mDAAX,gCACOzB,MAAM,CAACE,OADd,MACuBe,MAAM,CAAEJ,IAAI,CAACa,SAAL,CAAe1B,MAAM,CAACE,OAAP,CAAee,MAA9B,CAD/B,IAEGU,IAFH,CAEQ,UAAM,CAAE,CAFhB,EAGA,sCAAW5B,KAAX,MACIJ,WAAW,gCAAMI,KAAK,CAACJ,WAAZ,wBAA0BK,MAAM,CAACE,OAAP,CAAeS,EAAzC,CAA8CX,MAAM,CAACE,OAArD,EADf,GAEH,CACD,IAAKZ,CAAAA,aAAL,CAAoB,CAChB,sCAAWS,KAAX,MAAkBJ,WAAW,CAAE,EAA/B,GACH,CACD,QAAS,CACL,MAAOI,CAAAA,KAAP,CACH,CArGL,CAuGH,CAxGM","sourcesContent":["import { ADD_NEW_RECIPE, SET_RECIPES, SET_RECIPES_ALL, CLEAR_REDUCER, STAR_RECIPE, SET_STARRED_RECIPES } from './actions';\nimport Axios from 'axios';\n\nconst initialState = {\n    userRecipes: {},\n    recipes: {},\n    starred_recipes: {},\n}\n\nexport const recipesReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case STAR_RECIPE: {\n            switch (action.payload.starred) {\n                case true: {\n                    let userRecipeCopy = {...state.userRecipes}\n                    let recipesCopy = {...state.recipes}\n                    const recipeId = action.payload.recipeId\n                    if (recipeId in userRecipeCopy) {\n                        userRecipeCopy[recipeId].rating -= 1;\n                    }\n                    if (recipeId in recipesCopy) {\n                        recipesCopy[recipeId].rating -= 1;\n                    }\n                    return {...state, userRecipes: userRecipeCopy, recipes: recipesCopy}\n                }\n                case false: {\n                    let userRecipeCopy = {...state.userRecipes}\n                    let recipesCopy = {...state.recipes}\n                    const recipeId = action.payload.recipeId\n                    if (recipeId in userRecipeCopy) {\n                        userRecipeCopy[recipeId].rating += 1;\n                    }\n                    if (recipeId in recipesCopy) {\n                        recipesCopy[recipeId].rating += 1;\n                    }\n                    return {...state, userRecipes: userRecipeCopy, recipes: recipesCopy}\n                }\n                default: {\n                    return state\n                }\n            }\n        }\n        case SET_RECIPES_ALL: {\n            const settedRecipes = {}\n            action.payload.forEach((item) => {\n                settedRecipes[item.id] = {\n                    comments: JSON.parse(item.comments),\n                    cook: JSON.parse(item.cook),\n                    description: JSON.parse(item.description),\n                    id: item.id,\n                    images: JSON.parse(item.images) || [],\n                    lstOfProducts: JSON.parse(item.lstOfProducts),\n                    products: JSON.parse(item.products),\n                    rating: item.rating,\n                    time: item.time,\n                    title: item.title,\n                    userId: item.userId\n                }\n            })\n            return {...state, recipes: {...state.recipes, ...settedRecipes}}\n        }\n        case SET_STARRED_RECIPES: {\n            const settedUserStarredRecipes = {}\n            action.payload.forEach((item) => {\n                settedUserStarredRecipes[item.id] = {\n                    comments: JSON.parse(item.comments),\n                    cook: JSON.parse(item.cook),\n                    description: JSON.parse(item.description),\n                    id: item.id,\n                    images: JSON.parse(item.images) || [],\n                    lstOfProducts: JSON.parse(item.lstOfProducts),\n                    products: JSON.parse(item.products),\n                    rating: item.rating,\n                    time: item.time,\n                    title: item.title,\n                    userId: item.userId\n                }\n            })\n            return {...state, starred_recipes: {...settedUserStarredRecipes}}\n        }\n        case SET_RECIPES: {\n            const settedUserRecipes = {}\n            action.payload.forEach((item) => {\n                settedUserRecipes[item.id] = {\n                    comments: JSON.parse(item.comments),\n                    cook: JSON.parse(item.cook),\n                    description: JSON.parse(item.description),\n                    id: item.id,\n                    images: JSON.parse(item.images) || [],\n                    lstOfProducts: JSON.parse(item.lstOfProducts),\n                    products: JSON.parse(item.products),\n                    rating: item.rating,\n                    time: item.time,\n                    title: item.title,\n                    userId: item.userId\n                }\n            })\n            return {...state, userRecipes: {...state.userRecipes, ...settedUserRecipes}}\n        }\n        case ADD_NEW_RECIPE: {\n            Axios.post('https://cookery-app.herokuapp.com/reciepes/insert', {\n                ...action.payload, images: JSON.stringify(action.payload.images)\n            }).then(() => {})\n            return {...state,\n                userRecipes: {...state.userRecipes, [action.payload.id]: action.payload}}\n        }\n        case CLEAR_REDUCER: {\n            return {...state, userRecipes: {}}\n        }\n        default: {\n            return state\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}