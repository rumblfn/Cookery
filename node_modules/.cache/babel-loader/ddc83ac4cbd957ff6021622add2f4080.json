{"ast":null,"code":"import { ADD_NEW_RECIPE, SET_RECIPES, SET_RECIPES_ALL, CLEAR_REDUCER, STAR_RECIPE } from './actions';\nimport Axios from 'axios';\nconst initialState = {\n  userRecipes: {},\n  recipes: {}\n};\nexport const recipesReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case STAR_RECIPE:\n      {\n        switch (action.payload.starred) {\n          case true:\n            {\n              let userRecipeCopy = { ...state.userRecipes\n              };\n              let recipesCopy = { ...state.recipes\n              };\n              const recipeId = action.payload.recipeId;\n\n              if (recipeId in userRecipeCopy) {\n                userRecipeCopy[recipeId].rating -= 1;\n              }\n\n              if (recipeId in recipesCopy) {\n                recipesCopy[recipeId].rating -= 1;\n              }\n\n              return {\n                userRecipes: userRecipeCopy,\n                recipes: recipesCopy\n              };\n            }\n\n          case false:\n            {\n              let userRecipeCopy = [...state.userRecipes];\n              let recipesCopy = [...state.recipes];\n              let foundIndex = userRecipeCopy.findIndex(x => x.id == action.payload.recipeId);\n\n              if (foundIndex > -1) {\n                userRecipeCopy[foundIndex].rating += 1;\n              }\n\n              foundIndex = recipesCopy.findIndex(x => x.id == action.payload.recipeId);\n\n              if (foundIndex > -1) {\n                recipesCopy[foundIndex].rating += 1;\n              }\n\n              return {\n                userRecipes: userRecipeCopy,\n                recipes: recipesCopy\n              };\n            }\n\n          default:\n            {\n              return state;\n            }\n        }\n      }\n\n    case SET_RECIPES_ALL:\n      {\n        const settedRecipes = [];\n        Object.values(action.payload).forEach(item => {\n          settedRecipes.push({\n            comments: JSON.parse(item.comments),\n            cook: JSON.parse(item.cook),\n            description: JSON.parse(item.description),\n            id: item.id,\n            images: JSON.parse(item.images) || [],\n            lstOfProducts: JSON.parse(item.lstOfProducts),\n            products: JSON.parse(item.products),\n            rating: item.rating,\n            time: item.time,\n            title: item.title,\n            userId: item.userId\n          });\n        });\n        return { ...state,\n          recipes: [...state.recipes, ...settedRecipes]\n        };\n      }\n\n    case SET_RECIPES:\n      {\n        const settedUserRecipes = [];\n        Object.values(action.payload).forEach(item => {\n          settedUserRecipes.push({\n            comments: JSON.parse(item.comments),\n            cook: JSON.parse(item.cook),\n            description: JSON.parse(item.description),\n            id: item.id,\n            images: JSON.parse(item.images) || [],\n            lstOfProducts: JSON.parse(item.lstOfProducts),\n            products: JSON.parse(item.products),\n            rating: item.rating,\n            time: item.time,\n            title: item.title,\n            userId: item.userId\n          });\n        });\n        return { ...state,\n          userRecipes: [...settedUserRecipes]\n        };\n      }\n\n    case ADD_NEW_RECIPE:\n      {\n        Axios.post('http://localhost:3001/reciepes/insert', { ...action.payload,\n          images: JSON.stringify(action.payload.images)\n        }).then(() => {});\n        return { ...state,\n          userRecipes: [...state.userRecipes, action.payload],\n          recipes: [...state.recipes, action.payload]\n        };\n      }\n\n    case CLEAR_REDUCER:\n      {\n        return { ...state,\n          userRecipes: []\n        };\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/schoolProject/my-app/main/client/src/store/recipes/reducer.js"],"names":["ADD_NEW_RECIPE","SET_RECIPES","SET_RECIPES_ALL","CLEAR_REDUCER","STAR_RECIPE","Axios","initialState","userRecipes","recipes","recipesReducer","state","action","type","payload","starred","userRecipeCopy","recipesCopy","recipeId","rating","foundIndex","findIndex","x","id","settedRecipes","Object","values","forEach","item","push","comments","JSON","parse","cook","description","images","lstOfProducts","products","time","title","userId","settedUserRecipes","post","stringify","then"],"mappings":"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","sourcesContent":["import { ADD_NEW_RECIPE, SET_RECIPES, SET_RECIPES_ALL, CLEAR_REDUCER, STAR_RECIPE } from './actions';\nimport Axios from 'axios';\n\nconst initialState = {\n    userRecipes: {},\n    recipes: {},\n}\n\nexport const recipesReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case STAR_RECIPE: {\n            switch (action.payload.starred) {\n                case true: {\n                    let userRecipeCopy = {...state.userRecipes}\n                    let recipesCopy = {...state.recipes}\n                    const recipeId = action.payload.recipeId\n                    if (recipeId in userRecipeCopy) {\n                        userRecipeCopy[recipeId].rating -= 1;\n                    }\n                    if (recipeId in recipesCopy) {\n                        recipesCopy[recipeId].rating -= 1;\n                    }\n                    return {userRecipes: userRecipeCopy, recipes: recipesCopy}\n                }\n                case false: {\n                    let userRecipeCopy = [...state.userRecipes]\n                    let recipesCopy = [...state.recipes]\n                    let foundIndex = userRecipeCopy.findIndex(x => x.id == action.payload.recipeId);\n                    if (foundIndex > -1) {\n                        userRecipeCopy[foundIndex].rating += 1;\n                    }\n                    foundIndex = recipesCopy.findIndex(x => x.id == action.payload.recipeId);\n                    if (foundIndex > -1) {\n                        recipesCopy[foundIndex].rating += 1;\n                    }\n                    return {userRecipes: userRecipeCopy, recipes: recipesCopy}\n                }\n                default: {\n                    return state\n                }\n            }\n        }\n        case SET_RECIPES_ALL: {\n            const settedRecipes = []\n            Object.values(action.payload).forEach((item) => {\n                settedRecipes.push({\n                    comments: JSON.parse(item.comments),\n                    cook: JSON.parse(item.cook),\n                    description: JSON.parse(item.description),\n                    id: item.id,\n                    images: JSON.parse(item.images) || [],\n                    lstOfProducts: JSON.parse(item.lstOfProducts),\n                    products: JSON.parse(item.products),\n                    rating: item.rating,\n                    time: item.time,\n                    title: item.title,\n                    userId: item.userId\n                })\n            })\n            return {...state, recipes: [...state.recipes, ...settedRecipes]}\n        }\n        case SET_RECIPES: {\n            const settedUserRecipes = []\n            Object.values(action.payload).forEach((item) => {\n                settedUserRecipes.push(\n                    {\n                        comments: JSON.parse(item.comments),\n                        cook: JSON.parse(item.cook),\n                        description: JSON.parse(item.description),\n                        id: item.id,\n                        images: JSON.parse(item.images) || [],\n                        lstOfProducts: JSON.parse(item.lstOfProducts),\n                        products: JSON.parse(item.products),\n                        rating: item.rating,\n                        time: item.time,\n                        title: item.title,\n                        userId: item.userId\n                    }\n                )\n            })\n            return {...state, userRecipes: [...settedUserRecipes]}\n        }\n        case ADD_NEW_RECIPE: {\n            Axios.post('http://localhost:3001/reciepes/insert', {\n                ...action.payload, images: JSON.stringify(action.payload.images)\n            }).then(() => {})\n            return {\n                ...state,\n                userRecipes: [...state.userRecipes, action.payload],\n                recipes: [...state.recipes, action.payload]\n            }\n        }\n        case CLEAR_REDUCER: {\n            return {...state, userRecipes: []}\n        }\n        default: {\n            return state\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}