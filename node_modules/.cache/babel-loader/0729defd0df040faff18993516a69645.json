{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/samilvaliahmetov/education/programming/local-github/cookkery/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/samilvaliahmetov/education/programming/local-github/cookkery/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{productsConnect}from'../../../connect/products/products';import CheckIcon from'@mui/icons-material/Check';import'./style.css';import'../style.css';import Paper from'@mui/material/Paper';import InputBase from\"@mui/material/InputBase\";import Axios from'axios';import Button from'@mui/material/Button';import{useState,useEffect}from'react';import CircularProgress from'@mui/material/CircularProgress';import{useDispatch,useSelector}from'react-redux';import{addProductsWithAPI}from'../../../store/products';import{nanoid}from'nanoid';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Widget=productsConnect(function(_ref){var isLoading=_ref.isLoading,toggleClass=_ref.toggleClass,setInputValue=_ref.setInputValue,inputValue=_ref.inputValue,checkEmail=_ref.checkEmail,products=_ref.products,filterState=_ref.filterState,changeSelectedState=_ref.changeSelectedState,marginRightProp=_ref.marginRightProp,maxHeightProp=_ref.maxHeightProp;var default_size='70vh';var checkProduct=function checkProduct(item){changeSelectedState(item);};var filterProducts=function filterProducts(event){var text=event.target.value.toLowerCase();setInputValue(text);filterState(text);};var addNewProduct=function addNewProduct(){Axios.post('/products/insert',{productName:inputValue}).then(function(){});};return/*#__PURE__*/_jsxs(_Fragment,{children:[checkEmail?/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'16px',marginLeft:'16px'},children:/*#__PURE__*/_jsx(Button,{variant:\"outlined\",sx:{color:'black',backgroundColor:'white',borderColor:'black',\"&:hover\":{backgroundColor:'rgb(17,17,50)',color:'white',borderColor:'white'}},onClick:addNewProduct,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})}):null,/*#__PURE__*/_jsxs(Paper,{className:toggleClass?\"blob\":null,elevation:3,style:{borderRadius:'7px',padding:'10px',marginRight:marginRightProp,overflow:'auto',maxHeight:maxHeightProp||default_size},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'space-between',marginBottom:'25px'},children:/*#__PURE__*/_jsx(InputBase,{onChange:filterProducts,sx:{m:0,width:'100%',borderBottom:'2px solid black'},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"})}),/*#__PURE__*/_jsx(\"div\",{children:isLoading?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'32px 0'},children:/*#__PURE__*/_jsx(CircularProgress,{sx:{color:'black'}})}):Object.keys(products).length?Object.keys(products).map(function(elKey){return/*#__PURE__*/_jsxs(\"div\",{className:\"block\",onClick:function onClick(){return checkProduct(elKey);},children:[/*#__PURE__*/_jsx(\"p\",{children:products[elKey].name}),/*#__PURE__*/_jsx(CheckIcon,{hidden:!products[elKey].selected})]},nanoid());}):/*#__PURE__*/_jsx(\"div\",{style:{margin:'32px',textAlign:'center'},children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\"})})})]})]});});export var ListOfProducts=function ListOfProducts(_ref2){var toggleClass=_ref2.toggleClass;var dispatch=useDispatch();var selector=useSelector(function(state){return state.products.products;});var userData=useSelector(function(state){return state.user;});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),checkEmail=_useState2[0],setCheckEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),inputValue=_useState4[0],setInputValue=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var initialProducts={};useEffect(function(){if(userData.mail==='toshamilgis@gmail.com'){setCheckEmail(true);}if(Object.keys(selector).length===0){setIsLoading(true);Axios.get('/products/get').then(function(response){var index=0;var _iterator=_createForOfIteratorHelper(response.data),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var prod=_step.value;if(prod.name){initialProducts[index]={id:prod.id,name:prod.name,selected:Boolean(+prod.selected),usage:prod.usage};index+=1;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}dispatch(addProductsWithAPI(initialProducts));setIsLoading(false);});}},[]);return/*#__PURE__*/_jsx(Widget,{isLoading:isLoading,toggleClass:toggleClass,checkEmail:checkEmail,setInputValue:setInputValue,inputValue:inputValue});};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/local-github/cookkery/client/src/components/HomePage/listOfProducts/listOfProducts.js"],"names":["productsConnect","CheckIcon","Paper","InputBase","Axios","Button","useState","useEffect","CircularProgress","useDispatch","useSelector","addProductsWithAPI","nanoid","Widget","isLoading","toggleClass","setInputValue","inputValue","checkEmail","products","filterState","changeSelectedState","marginRightProp","maxHeightProp","default_size","checkProduct","item","filterProducts","event","text","target","value","toLowerCase","addNewProduct","post","productName","then","marginBottom","marginLeft","color","backgroundColor","borderColor","borderRadius","padding","marginRight","overflow","maxHeight","display","justifyContent","m","width","borderBottom","textAlign","Object","keys","length","map","elKey","name","selected","margin","ListOfProducts","dispatch","selector","state","userData","user","setCheckEmail","setIsLoading","initialProducts","mail","get","response","index","data","prod","id","Boolean","usage"],"mappings":"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","sourcesContent":["import { productsConnect } from '../../../connect/products/products';\nimport CheckIcon from '@mui/icons-material/Check';\nimport './style.css';\nimport '../style.css';\nimport Paper from '@mui/material/Paper';\nimport InputBase from \"@mui/material/InputBase\";\nimport Axios from 'axios';\nimport Button from '@mui/material/Button';\nimport { useState, useEffect } from 'react';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { addProductsWithAPI } from '../../../store/products';\nimport { nanoid } from 'nanoid';\n\n\nconst Widget = productsConnect(({isLoading, toggleClass, setInputValue, inputValue, checkEmail, products, filterState, changeSelectedState, marginRightProp, maxHeightProp}) => {\n    let default_size = '70vh'\n\n    const checkProduct = (item) => {\n        changeSelectedState(item)\n    }\n\n    const filterProducts = (event) => {\n        let text = event.target.value.toLowerCase()\n        setInputValue(text)\n        filterState(text);\n    }\n\n    const addNewProduct = () => {\n        Axios.post('/products/insert', {\n            productName: inputValue\n        }).then(() => {\n        })\n    }\n\n    return (\n        <>\n        {checkEmail ?\n        <div style={{marginBottom: '16px', marginLeft: '16px'}}>\n            <Button variant=\"outlined\" sx={{\n                color: 'black', backgroundColor: 'white', borderColor: 'black',\n                \"&:hover\": {\n                    backgroundColor: 'rgb(17,17,50)',\n                    color: 'white',\n                    borderColor: 'white',\n                }\n            }} onClick={addNewProduct}>\n                Добавить\n            </Button>\n        </div> : null\n        }\n        <Paper className={toggleClass ? \"blob\": null} elevation={3} style={{borderRadius: '7px', padding: '10px', marginRight: marginRightProp, overflow: 'auto', maxHeight: maxHeightProp || default_size}}>\n            <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '25px'}}>\n                <InputBase\n                    onChange={filterProducts}\n                    sx={{m: 0, width: '100%', borderBottom: '2px solid black'}} placeholder=\"Введите название продукта\"\n                />\n            </div>\n            <div>\n            {isLoading ? \n            <div style={{textAlign: 'center', padding: '32px 0'}}>\n                <CircularProgress sx={{color: 'black'}}/>\n            </div> :\n            (Object.keys(products).length ?\n                Object.keys(products).map(elKey => (\n                <div key={nanoid()} className=\"block\" onClick={() => checkProduct(elKey)}>\n                    <p>{products[elKey].name}</p>\n                    <CheckIcon hidden={!products[elKey].selected}/>\n                </div>))\n            : <div style={{margin: '32px', textAlign: 'center'}}>\n                <p>Продукт не найден</p>\n            </div>)}\n            </div>\n        </Paper>\n        </>\n    )\n})\n\nexport const ListOfProducts = ({toggleClass}) => {\n    const dispatch = useDispatch();\n    const selector = useSelector((state) => state.products.products);\n    const userData = useSelector((state) => state.user)\n\n    const [checkEmail, setCheckEmail] = useState(false);\n    const [inputValue, setInputValue] = useState('');\n    const [isLoading, setIsLoading] = useState(false);\n    const initialProducts = {}\n\n    useEffect(() => {\n        if (userData.mail === 'toshamilgis@gmail.com') {\n            setCheckEmail(true)\n        }\n\n        if (Object.keys(selector).length === 0) {\n            setIsLoading(true)\n            Axios.get('/products/get').then((response) => {\n                let index = 0\n                for (let prod of response.data) {\n                    if (prod.name) {\n                        initialProducts[index] = {\n                            id: prod.id,\n                            name: prod.name,\n                            selected: Boolean(+prod.selected),\n                            usage: prod.usage\n                        }\n                        index += 1\n                    }\n                }\n                dispatch(addProductsWithAPI(initialProducts))\n                setIsLoading(false)\n            })\n        }\n    }, [])\n\n    return (\n        <Widget isLoading={isLoading} toggleClass={toggleClass} checkEmail={checkEmail} setInputValue={setInputValue} inputValue={inputValue}/>\n    )\n}"]},"metadata":{},"sourceType":"module"}