{"ast":null,"code":"import _regeneratorRuntime from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/samilvaliahmetov/education/programming/local-github/Cookery/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{Link,useNavigate}from'react-router-dom';import Box from'@mui/material/Box';import TextField from'@mui/material/TextField';import'../Login/loginAndSignUpStyles.css';import Alert from'@mui/material/Alert';import Button from'@mui/material/Button';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Registration=function Registration(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),nameError=_useState8[0],setNameError=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),passwordError=_useState10[0],setPasswordError=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),emailError=_useState12[0],setEmailError=_useState12[1];var mediumRegex=new RegExp(\"^(((?=.*[A-Z])(?=.*[0-9])(?=.*[a-z])))(?=.{8,})\");var navigate=useNavigate();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(name.length<5){setNameError(\"Длина имени короче 5\");}if(!mediumRegex.test(password)){setPasswordError(\"Некорректно введён пароль\");}if(mediumRegex.test(password)&&name.length>4){signUp();}case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var signUp=function signUp(){Axios.post('/users/insert',{userName:name,userEmail:email,userPassword:password}).then(function(res){if(res.data.errno===1062){setEmailError('Пользователь с такой почтой уже существуйет, войдите');}else if(!res.data){navigate('/login');}});};return/*#__PURE__*/_jsx(\"div\",{className:\"mainPage\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',width:'100%'},children:[/*#__PURE__*/_jsx(TextField,{sx:{m:1,mt:3},id:\"demo-helper-text-misaligned-no-helper\",label:\"\\u041E\\u0442\\u043E\\u0431\\u0440\\u0430\\u0436\\u0430\\u0435\\u043C\\u043E\\u0435 \\u0438\\u043C\\u044F\",name:\"name\",color:\"background\",onChange:function onChange(e){if(name.length>4){setNameError('');}setName(e.target.value);},value:name,type:\"name\"}),/*#__PURE__*/_jsx(TextField,{id:\"demo-helper-text-misaligned-no-helper\",label:\"\\u041F\\u043E\\u0447\\u0442\\u0430\",name:\"email\",type:\"email\",color:\"background\",onChange:function onChange(e){setEmail(e.target.value);},value:email,sx:{m:1}}),/*#__PURE__*/_jsx(TextField,{sx:{m:1,mb:3},id:\"demo-helper-text-misaligned-no-helper\",label:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",name:\"password\",color:\"background\",onChange:function onChange(e){if(mediumRegex.test(password)){setPasswordError('');}setPassword(e.target.value);},value:password,type:\"password\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[emailError&&/*#__PURE__*/_jsx(Alert,{sx:{mb:2},severity:\"error\",children:emailError}),nameError&&/*#__PURE__*/_jsx(Alert,{sx:{mb:2},severity:\"error\",children:nameError}),passwordError&&/*#__PURE__*/_jsx(Alert,{sx:{mb:2},severity:\"error\",children:passwordError}),/*#__PURE__*/_jsx(Button,{style:{borderColor:\"#000000\",color:'#000000'},variant:\"outlined\",type:\"submit\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u0423\\u0436\\u0435 \\u0435\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435\"})]})]})});};","map":{"version":3,"sources":["/Users/samilvaliahmetov/education/programming/local-github/Cookery/src/components/SignUp/index.js"],"names":["useState","Link","useNavigate","Box","TextField","Alert","Button","Axios","Registration","name","setName","email","setEmail","password","setPassword","nameError","setNameError","passwordError","setPasswordError","emailError","setEmailError","mediumRegex","RegExp","navigate","handleSubmit","e","preventDefault","length","test","signUp","post","userName","userEmail","userPassword","then","res","data","errno","display","flexDirection","width","m","mt","target","value","mb","borderColor","color"],"mappings":"4bAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAO,mCAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAC9B,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,eAA0BV,QAAQ,CAAC,EAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAOa,QAAP,eAAiBC,WAAjB,eACA,eAAkCd,QAAQ,CAAC,EAAD,CAA1C,yCAAOe,SAAP,eAAkBC,YAAlB,eACA,eAA0ChB,QAAQ,CAAC,EAAD,CAAlD,0CAAOiB,aAAP,gBAAsBC,gBAAtB,gBACA,gBAAoClB,QAAQ,CAAC,EAAD,CAA5C,2CAAOmB,UAAP,gBAAmBC,aAAnB,gBACA,GAAMC,CAAAA,WAAW,CAAG,GAAIC,CAAAA,MAAJ,CAAW,iDAAX,CAApB,CACA,GAAMC,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CAEA,GAAMsB,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,kHACjBA,CAAC,CAACC,cAAF,GACA,GAAIjB,IAAI,CAACkB,MAAL,CAAc,CAAlB,CAAqB,CACjBX,YAAY,CAAC,sBAAD,CAAZ,CACH,CACD,GAAI,CAACK,WAAW,CAACO,IAAZ,CAAiBf,QAAjB,CAAL,CAAiC,CAC7BK,gBAAgB,CAAC,2BAAD,CAAhB,CACH,CAED,GAAIG,WAAW,CAACO,IAAZ,CAAiBf,QAAjB,GAA8BJ,IAAI,CAACkB,MAAL,CAAc,CAAhD,CAAmD,CAC/CE,MAAM,GACT,CAXgB,sDAAH,kBAAZL,CAAAA,YAAY,4CAAlB,CAcA,GAAMK,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBtB,KAAK,CAACuB,IAAN,CAAW,eAAX,CAA4B,CACxBC,QAAQ,CAAEtB,IADc,CAExBuB,SAAS,CAAErB,KAFa,CAGxBsB,YAAY,CAAEpB,QAHU,CAA5B,EAIGqB,IAJH,CAIQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,IAAJ,CAASC,KAAT,GAAmB,IAAvB,CAA6B,CACzBjB,aAAa,CAAC,sDAAD,CAAb,CACH,CAFD,IAEO,IAAI,CAACe,GAAG,CAACC,IAAT,CAAe,CAClBb,QAAQ,CAAC,QAAD,CAAR,CACH,CACJ,CAVD,EAWH,CAZD,CAcA,mBACI,YAAK,SAAS,CAAC,UAAf,uBACI,cAAM,QAAQ,CAAEC,YAAhB,wBACI,0FADJ,cAEI,MAAC,GAAD,EACI,EAAE,CAAE,CACAc,OAAO,CAAE,MADT,CAEAC,aAAa,CAAE,QAFf,CAGAC,KAAK,CAAE,MAHP,CADR,wBAOI,KAAC,SAAD,EACI,EAAE,CAAE,CAACC,CAAC,CAAE,CAAJ,CAAOC,EAAE,CAAE,CAAX,CADR,CAEI,EAAE,CAAC,uCAFP,CAGI,KAAK,CAAC,6FAHV,CAII,IAAI,CAAC,MAJT,CAKI,KAAK,CAAC,YALV,CAMI,QAAQ,CAAE,kBAACjB,CAAD,CAAO,CAAC,GAAIhB,IAAI,CAACkB,MAAL,CAAc,CAAlB,CAAqB,CAACX,YAAY,CAAC,EAAD,CAAZ,CAAiB,CAACN,OAAO,CAACe,CAAC,CAACkB,MAAF,CAASC,KAAV,CAAP,CAAwB,CANtF,CAOI,KAAK,CAAEnC,IAPX,CAQI,IAAI,CAAC,MART,EAPJ,cAiBI,KAAC,SAAD,EACI,EAAE,CAAC,uCADP,CAEI,KAAK,CAAC,gCAFV,CAGI,IAAI,CAAC,OAHT,CAII,IAAI,CAAC,OAJT,CAKI,KAAK,CAAC,YALV,CAMI,QAAQ,CAAE,kBAACgB,CAAD,CAAO,CAACb,QAAQ,CAACa,CAAC,CAACkB,MAAF,CAASC,KAAV,CAAR,CAAyB,CAN/C,CAOI,KAAK,CAAEjC,KAPX,CAQI,EAAE,CAAE,CAAC8B,CAAC,CAAE,CAAJ,CARR,EAjBJ,cA2BI,KAAC,SAAD,EACI,EAAE,CAAE,CAACA,CAAC,CAAE,CAAJ,CAAOI,EAAE,CAAE,CAAX,CADR,CAEI,EAAE,CAAC,uCAFP,CAGI,KAAK,CAAC,sCAHV,CAII,IAAI,CAAC,UAJT,CAKI,KAAK,CAAC,YALV,CAMI,QAAQ,CAAE,kBAACpB,CAAD,CAAO,CAAC,GAAIJ,WAAW,CAACO,IAAZ,CAAiBf,QAAjB,CAAJ,CAAgC,CAACK,gBAAgB,CAAC,EAAD,CAAhB,CAAqB,CAACJ,WAAW,CAACW,CAAC,CAACkB,MAAF,CAASC,KAAV,CAAX,CAA4B,CANzG,CAOI,KAAK,CAAE/B,QAPX,CAQI,IAAI,CAAC,UART,EA3BJ,GAFJ,cAwCI,uBACKM,UAAU,eAAI,KAAC,KAAD,EAAO,EAAE,CAAE,CAAC0B,EAAE,CAAE,CAAL,CAAX,CAAoB,QAAQ,CAAC,OAA7B,UAAsC1B,UAAtC,EADnB,CAEKJ,SAAS,eAAI,KAAC,KAAD,EAAO,EAAE,CAAE,CAAC8B,EAAE,CAAE,CAAL,CAAX,CAAoB,QAAQ,CAAC,OAA7B,UAAsC9B,SAAtC,EAFlB,CAGKE,aAAa,eAAI,KAAC,KAAD,EAAO,EAAE,CAAE,CAAC4B,EAAE,CAAE,CAAL,CAAX,CAAoB,QAAQ,CAAC,OAA7B,UAAsC5B,aAAtC,EAHtB,cAII,KAAC,MAAD,EACI,KAAK,CAAE,CACH6B,WAAW,CAAE,SADV,CAEHC,KAAK,CAAE,SAFJ,CADX,CAKI,OAAO,CAAC,UALZ,CAMI,IAAI,CAAC,QANT,mGAJJ,GAxCJ,cAsDI,aAtDJ,cAuDI,6HACsB,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,wDADtB,GAvDJ,GADJ,EADJ,CA+DH,CArGM","sourcesContent":["import { useState } from \"react\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport Box from '@mui/material/Box';\nimport TextField from '@mui/material/TextField';\nimport '../Login/loginAndSignUpStyles.css';\nimport Alert from '@mui/material/Alert';\nimport Button from '@mui/material/Button';\nimport Axios from 'axios';\n\nexport const Registration = () => {\n    const [name, setName] = useState(\"\")\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [nameError, setNameError] = useState(\"\");\n    const [passwordError, setPasswordError] = useState(\"\");\n    const [emailError, setEmailError] = useState(\"\");\n    const mediumRegex = new RegExp(\"^(((?=.*[A-Z])(?=.*[0-9])(?=.*[a-z])))(?=.{8,})\");\n    const navigate = useNavigate()\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        if (name.length < 5) {\n            setNameError(\"Длина имени короче 5\");\n        }\n        if (!mediumRegex.test(password)) {\n            setPasswordError(\"Некорректно введён пароль\")\n        }\n\n        if (mediumRegex.test(password) && name.length > 4) {\n            signUp()\n        }\n    };\n\n    const signUp = () => {\n        Axios.post('/users/insert', {\n            userName: name,\n            userEmail: email,\n            userPassword: password,\n        }).then((res) => {\n            if (res.data.errno === 1062) {\n                setEmailError('Пользователь с такой почтой уже существуйет, войдите')\n            } else if (!res.data) {\n                navigate('/login')\n            }\n        })\n    }\n\n    return (\n        <div className='mainPage'>\n            <form onSubmit={handleSubmit}>\n                <h4>Регистрация</h4>\n                <Box\n                    sx={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        width: '100%'\n                    }}\n                >\n                    <TextField\n                        sx={{m: 1, mt: 3}}\n                        id=\"demo-helper-text-misaligned-no-helper\"\n                        label=\"Отображаемое имя\"\n                        name=\"name\"\n                        color=\"background\"\n                        onChange={(e) => {if (name.length > 4) {setNameError('')} setName(e.target.value)}}\n                        value={name}\n                        type=\"name\"\n                    />\n                    <TextField\n                        id=\"demo-helper-text-misaligned-no-helper\"\n                        label=\"Почта\"\n                        name=\"email\"\n                        type=\"email\"\n                        color=\"background\"\n                        onChange={(e) => {setEmail(e.target.value)}}\n                        value={email}\n                        sx={{m: 1}}\n                    />\n                    <TextField\n                        sx={{m: 1, mb: 3}}\n                        id=\"demo-helper-text-misaligned-no-helper\"\n                        label=\"Пароль\"\n                        name=\"password\"\n                        color=\"background\"\n                        onChange={(e) => {if (mediumRegex.test(password)) {setPasswordError('')} setPassword(e.target.value)}}\n                        value={password}\n                        type=\"password\"\n                    />\n                </Box>\n                <div>\n                    {emailError && <Alert sx={{mb: 2}} severity=\"error\">{emailError}</Alert>}\n                    {nameError && <Alert sx={{mb: 2}} severity=\"error\">{nameError}</Alert>}\n                    {passwordError && <Alert sx={{mb: 2}} severity=\"error\">{passwordError}</Alert>}\n                    <Button \n                        style={{\n                            borderColor: \"#000000\",\n                            color: '#000000',\n                        }}\n                        variant=\"outlined\" \n                        type=\"submit\"\n                    >Создать аккаунт\n                    </Button>\n                </div>\n                <br/>\n                <p>\n                    Уже есть аккаунт? <Link to=\"/login\">Войдите</Link>\n                </p>\n            </form>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}